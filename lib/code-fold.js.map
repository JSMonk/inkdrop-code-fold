{"version":3,"sources":["../src/code-fold.js"],"names":["module","exports","activate","global","inkdrop","on","handleEditorInit","deactivate","editor","getActiveEditor","codeMirror","originalGutters","setOption","cm","getOption","concat"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;;;AAEAA,OAAOC,OAAP,GAAiB;;AAEfC,aAAY;AACVC,WAAOC,OAAP,CAAeC,EAAf,CAAkB,aAAlB,EAAmC,KAAKC,gBAAxC,MAAmC,IAAnC;AACD,GAJc;;AAMfC,eAAc;AACZ,UAAMC,SAASL,OAAOC,OAAP,CAAeK,eAAf,EAAf;AACA,QAAID,UAAUA,OAAOE,UAAjB,IAA+B,KAAKC,eAAxC,EAAyD;AACvDH,aAAOE,UAAP,CAAkBE,SAAlB,CAA4B,SAA5B,EAAuC,KAAKD,eAA5C;AACD;AACF,GAXc;;AAafL,mBAAkBE,MAAlB,EAA0B;AACxB,QAAIK,KAAKL,OAAOE,UAAhB;AACA,SAAKC,eAAL,GAAuBE,GAAGC,SAAH,CAAa,SAAb,CAAvB;AACAD,OAAGD,SAAH,CAAa,YAAb,EAA2B,IAA3B;AACAC,OAAGD,SAAH,CAAa,SAAb,EAAwB,KAAKD,eAAL,CAAqBI,MAArB,CAA4B,CAAC,uBAAD,CAA5B,CAAxB;AACD;AAlBc,CAAjB","file":"code-fold.js","sourcesContent":["import foldCode from 'codemirror/addon/fold/foldcode'\nimport foldGutter from 'codemirror/addon/fold/foldgutter'\nimport foldMd from 'codemirror/addon/fold/markdown-fold.js'\n\nmodule.exports = {\n\n  activate () {\n    global.inkdrop.on('editor:init', ::this.handleEditorInit)\n  },\n\n  deactivate () {\n    const editor = global.inkdrop.getActiveEditor()\n    if (editor && editor.codeMirror && this.originalGutters) {\n      editor.codeMirror.setOption('gutters', this.originalGutters)\n    }\n  },\n\n  handleEditorInit (editor) {\n    var cm = editor.codeMirror\n    this.originalGutters = cm.getOption('gutters')\n    cm.setOption('foldGutter', true)\n    cm.setOption('gutters', this.originalGutters.concat([\"CodeMirror-foldgutter\"]))\n  }\n};\n"]}